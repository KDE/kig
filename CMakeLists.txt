kde4_header()

set(libmisc_SRCS
   ${CMAKE_SOURCE_DIR}/kig/misc/argsparser.cpp 
   ${CMAKE_SOURCE_DIR}/kig/misc/builtin_stuff.cc 
   ${CMAKE_SOURCE_DIR}/kig/misc/calcpaths.cc 
   ${CMAKE_SOURCE_DIR}/kig/misc/common.cpp 
   ${CMAKE_SOURCE_DIR}/kig/misc/conic-common.cpp 
   ${CMAKE_SOURCE_DIR}/kig/misc/coordinate.cpp 
   ${CMAKE_SOURCE_DIR}/kig/misc/coordinate_system.cpp 
   ${CMAKE_SOURCE_DIR}/kig/misc/cubic-common.cc 
   ${CMAKE_SOURCE_DIR}/kig/misc/equation.cc 
   ${CMAKE_SOURCE_DIR}/kig/misc/goniometry.cc 
   ${CMAKE_SOURCE_DIR}/kig/misc/guiaction.cc 
   ${CMAKE_SOURCE_DIR}/kig/misc/kigfiledialog.cc 
   ${CMAKE_SOURCE_DIR}/kig/misc/kiginputdialog.cc 
   ${CMAKE_SOURCE_DIR}/kig/misc/kignumerics.cpp 
   ${CMAKE_SOURCE_DIR}/kig/misc/kigpainter.cpp 
   ${CMAKE_SOURCE_DIR}/kig/misc/kigtransform.cpp 
   ${CMAKE_SOURCE_DIR}/kig/misc/lists.cc 
   ${CMAKE_SOURCE_DIR}/kig/misc/object_constructor.cc 
   ${CMAKE_SOURCE_DIR}/kig/misc/object_hierarchy.cc 
   ${CMAKE_SOURCE_DIR}/kig/misc/rect.cc 
   ${CMAKE_SOURCE_DIR}/kig/misc/screeninfo.cc 
   ${CMAKE_SOURCE_DIR}/kig/misc/special_constructors.cc 
   ${CMAKE_SOURCE_DIR}/kig/misc/unit.cc
)


add_subdirectory( objects ) 
add_subdirectory( misc ) 
add_subdirectory( modes ) 
add_subdirectory( icons ) 
add_subdirectory( filters ) 
add_subdirectory( examples ) 
add_subdirectory( kig ) 
add_subdirectory( mimetypes ) 
add_subdirectory( macros ) 
add_subdirectory( kfile ) 
add_subdirectory( data ) 
add_subdirectory( pykig ) 

message(STATUS "${CMAKE_CURRENT_SOURCE_DIR}: skipped subdir $(scriptingdir)")
include_directories( ${KDE4_INCLUDE_DIR} ${QT_INCLUDES} ${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_CURRENT_BINARY_DIR}  )


########### next target ###############

set(kigpart_PART_SRCS dummy.cpp ${libmisc_SRCS})

kde4_automoc(${kigpart_PART_SRCS})

file(WRITE dummy.cpp "//autogenerated file by cmake\n")
kde4_add_plugin(kigpart WITH_PREFIX ${kigpart_PART_SRCS})

kde4_install_libtool_file( ${PLUGIN_INSTALL_DIR} kigpart )

target_link_libraries(kigpart  ${LIB_KPARTS} kparts objects filters modes kigparttemp )

install_targets(${LIB_INSTALL_DIR}/kde4 kigpart )


########### install files ###############


kde4_create_doxygen_docs( RECURSIVE EXCLUDE python-scripting-api-dox-mainpage.dox  )

kde4_footer()



#original Makefile.am contents follow:

#if KIG_COMPILE_PYTHON_SCRIPTING
#scriptingdir = scripting
#scriptinglib = scripting/libscripting.la
#else
#scriptingdir =
#scriptinglib =
#endif
#
#SUBDIRS = \
#	objects \
#	misc \
#	modes \
#	icons \
#	filters \
#	examples \
#	kig \
#	mimetypes \
#	macros \
#	kfile \
#	data \
#	pykig \
#	$(scriptingdir)
#
#kde_module_LTLIBRARIES = libkigpart.la
#libkigpart_la_SOURCES = dummy.cpp
#libkigpart_la_LDFLAGS = -module $(KDE_PLUGIN) $(all_libraries)
#libkigpart_la_LIBADD  = $(LIB_KPARTS) \
#	misc/libmisc.la objects/libobjects.la filters/libfilters.la \
#	modes/libmodes.la kig/libkigparttemp.la $(scriptinglib)
#
#messages: rc.cpp
#	rm -f tips.cpp
#	$(EXTRACTRC) */*.rc >> rc.cpp
#	$(EXTRACTRC) */*.ui >> rc.cpp
#	(cd data && $(PREPARETIPS) > ../tips.cpp)
#	for file in macros/*.kigt; do \
#		cat "$$file" | grep '<Name>' | sed -e 's/^ *<Name>\([^<]*\)<\/Name>/i18n( "\1" );/' | sed -e 's/&amp;/\&/g' >> rc.cpp; \
#		cat "$$file" | grep '<Description>' | sed -e 's/^ *<Description>\([^<]*\)<\/Description>/i18n( "\1" );/' | sed -e 's/&amp;/\&/g' >> rc.cpp; \
#		cat "$$file" | grep '<UseText>' | sed -e 's/^ *<UseText>\([^<]*\)<\/UseText>/i18n( "\1" );/' | sed -e 's/&amp;/\&/g' >> rc.cpp; \
#		cat "$$file" | grep '<SelectStatement>' | sed -e 's/^ *<SelectStatement>\([^<]*\)<\/SelectStatement>/i18n( "\1" );/' | sed -e 's/&amp;/\&/g' >> rc.cpp; \
#	done
#	$(XGETTEXT) tips.cpp rc.cpp filters/*.h kig/*.h misc/*.h modes/*.h objects/*.h scripting/*.h */*.cc kig/*.cpp misc/*.cpp modes/*.cpp -o $(podir)/kig.pot
#	$(XGETTEXT) kfile/kfile_drgeo.cpp kfile/kfile_drgeo.h -o $(podir)/kfile_drgeo.pot
#	$(XGETTEXT) kfile/kfile_kig.cpp kfile/kfile_kig.h -o $(podir)/kfile_kig.pot
#
#CLEANFILES = dummy.cpp
#
#dummy.cpp: 
#	touch dummy.cpp
#
#TAGS: 
#	find -name '*.cc' -o -name '*.cpp' -o -name '*.h' | etags -
#
## Want to do the scripting part separately, but
## include everything else.
#DOXYGEN_EXCLUDE = python-scripting-api-dox-mainpage.dox
#DOXYGEN_SET_RECURSIVE = YES
#include ../admin/Doxyfile.am
